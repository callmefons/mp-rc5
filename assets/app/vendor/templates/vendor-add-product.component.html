<!-- Modal -->
<div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">{{'Create Your Service' | translate}}</h4>
            </div>
            <div class="modal-body">
                <p *ngIf="!added">{{'Waiting for Add Service' | translate}}...</p>
                <p *ngIf="added">{{'Successfully Added'| translate}}</p>
            </div>
            <div class="modal-footer">
                <div *ngIf="added">
                    <button type="button" class="btn btn-primary" data-dismiss="modal" (click)="onCancle()">{{'OK' |
                        translate}}
                    </button>
                </div>
            </div>
        </div>
    </div>
</div>

<navbar-vendor-component></navbar-vendor-component>

<div class="container">
    <!--<div *ngIf="loading">-->
    <!--<loader-template></loader-template>-->
    <!--</div>-->
    <a><p (click)="onCancle()">Back</p></a>
    <div *ngIf="!loading">
        <div class="row">
            <h1>{{'Add Listing'| translate}}</h1>
            <hr>
            <p>{{'Enter Content in' | translate}}
                <button class="btn  {{selectedLang == 'en' ? 'btn-primary': 'btn-default'}}"
                        (click)="onChangeLanguaeFrom('en')">{{'English'| translate}}
                </button>
                <button class="btn {{selectedLang == 'th' ? 'btn-primary': 'btn-default'}}"
                        (click)="onChangeLanguaeFrom('th')">{{'Thai' | translate}}
                </button>
            </p>
            <hr>
            <div>
                <div class="row">
                    <form [formGroup]="myForm" (ngSubmit)="myForm.valid && onSubmit(myForm.value)" novalidate
                          enctype="multipart/form-data">

                        <div class="row">
                            <div class=".col-md-3 .col-md-offset-3">
                                <button type="button"
                                        class="btn btn-default pull-right"
                                        (click)="onCancle()">{{'Cancel' | translate}}
                                </button>
                                <button [disabled]='!myForm.valid'
                                        class="btn btn-primary pull-right btn-save"
                                        type='submit' data-toggle="modal"
                                        data-target="#myModal">
                                    {{'Save' | translate}}
                                </button>
                            </div>
                        </div>

                        <div class="row">
                            <div class="col-md-3">
                                <img [src]="myFormLogo.dataURL" [hidden]="!src" class="img-responsive previewLogo" alt="Logo">
                                <fieldset class="form-group">
                                    <p *ngIf="!fileChosen">No file chosen</p>
                                    <label class="custom-file-upload">
                                        <input type="file"
                                               image-upload
                                               (imageSelected)="fileChangeLogo($event)"
                                               [resizeOptions]="resizeOptions"
                                               formControlName="logo"
                                        >
                                        {{'Add Logo' | translate}}
                                    </label>
                                </fieldset>
                            </div>
                            <div class="col-md-4 content-center">
                                <div class="row">
                                    <fieldset class="form-group">
                                        <label>* {{'Name' | translate}}</label>
                                        <input type="text"
                                               class="form-control"
                                               placeholder="{{'Name' | translate}}"
                                               formControlName="name"
                                        >
                                        <control-messages [control]="myForm.controls.name"></control-messages>
                                    </fieldset>
                                </div>

                                <!--Description-->
                                <div class="row" [class.hidden]="thaiInput">
                                    <fieldset class="form-group">
                                        <label>* {{'Description' | translate}}</label>
                                        <textarea
                                                type="text"
                                                class="form-control"
                                                placeholder="{{'Description' | translate}}"
                                                formControlName="description"></textarea>
                                        <control-messages [control]="myForm.controls.description"></control-messages>
                                    </fieldset>
                                </div>

                                <div class="row" [class.hidden]="thaiInput">
                                    <fieldset class="form-group">
                                        <label>* {{'Short Description' | translate}}</label>
                                        <textarea type="text"
                                                  class="form-control"
                                                  placeholder="{{'Short Description' | translate}}"
                                                  formControlName="shortdescription"></textarea>
                                        <control-messages [control]="myForm.controls.shortdescription"></control-messages>
                                    </fieldset>

                                </div>

                                <!-- Thai Description-->
                                <div class="row" [class.hidden]="!thaiInput">
                                    <fieldset class="form-group">
                                        <label>* {{'Description' | translate}}</label>
                                        <textarea
                                                type="text"
                                                class="form-control"
                                                placeholder="{{'Description' | translate}}"
                                                formControlName="thai_description"></textarea>
                                        <control-messages [control]="myForm.controls.thai_description"></control-messages>
                                    </fieldset>
                                </div>

                                <div class="row" [class.hidden]="!thaiInput">
                                    <fieldset class="form-group">
                                        <label>* {{'Short Description' | translate}}</label>
                                        <textarea type="text"
                                                  class="form-control"
                                                  placeholder="{{'Short Description' | translate}}"
                                                  formControlName="thai_shortdescription"></textarea>
                                        <control-messages [control]="myForm.controls.thai_shortdescription"></control-messages>
                                    </fieldset>

                                </div>


                                <!--Feature-->
                                <div class="row" [class.hidden]="thaiInput">
                                    <p>* The maximum feature length is 5 length.</p>
                                    <div *ngFor="let feature of myFormFeatures">
                                        <pre>{{ feature }}</pre>
                                        <button type="button" (click)="onDeleteFeature(feature, 'en')"
                                                class="btn btn-default btn-xs">{{'Delete' | translate}}
                                        </button>
                                    </div>
                                    <fieldset class="form-group">
                                        <label>{{'Features' | translate}}</label>
                                        <input
                                                [(ngModel)]="newFeature"
                                                [ngModelOptions]="{standalone: true}"
                                                type="text"
                                                class="form-control"
                                                placeholder="{{'Features' | translate}}">
                                        <button type="button" class="btn btn-sm btn-primary"
                                                (click)="onAddNewFeature(newFeature, 'en')">+ {{'Features' | translate}}
                                        </button>

                                    </fieldset>
                                </div>

                                <!--Thai Feature-->
                                <div class="row" [class.hidden]="!thaiInput">
                                    <div *ngFor="let feature of myFormThaiFeatures">
                                        <pre>{{ feature }}</pre>
                                        <button type="button" (click)="onDeleteFeature(feature, 'th')"
                                                class="btn btn-default btn-xs">{{'Delete' | translate}}
                                        </button>
                                    </div>
                                    <fieldset class="form-group">
                                        <label>{{'Features' | translate}}</label>
                                        <input
                                                [(ngModel)]="newThaiFeature"
                                                [ngModelOptions]="{standalone: true}"
                                                type="text"
                                                class="form-control"
                                                placeholder="{{'Features' | translate}}">
                                        <button type="button" class="btn btn-sm btn-default"
                                                (click)="onAddNewFeature(newThaiFeature, 'th')">+ {{'Features' |
                                            translate}}
                                        </button>
                                    </fieldset>
                                </div>


                            </div>
                            <div class="col-md-5">
                                <div class="row">
                                    <h4>{{'Purchase Link' | translate}}</h4>
                                    <fieldset class="form-group">
                                        <input
                                                type="text"
                                                class="form-control"
                                                placeholder="URL where users can purchase"
                                                formControlName="purchase_link">
                                    </fieldset>
                                </div>

                                <div class="row">
                                    <h4>{{'Payment and Pricing' | translate}}</h4>

                                    <form class="form-horizontal">

                                        <div class="checkbox" *ngFor="let opt of options.pricing_model">
                                            <label>
                                                <input #{{opt.id}} type="checkbox"
                                                       (change)="onCheckboxPricingModel(opt,$event)"
                                                       [checked]="checkAll"
                                                > {{opt.name}}</label>

                                            <form class="form-horizontal">

                                                <div *ngIf="showFreeService && opt.name === 'Freemium Version'">
                                                    <form class="form-inline">
                                                        <div class="form-group">
                                                            <label>{{'Trial Length' | translate}}</label>
                                                            <input class="form-control"
                                                                   type="number"
                                                                   #day
                                                                   (change)="onInputDay(opt.id,day.value)">
                                                            <label>{{'days' | translate}}</label>
                                                        </div>

                                                    </form>
                                                </div>

                                                <div *ngIf="showMonthly && opt.name === 'Monthly Subscription'">

                                                    <div class="row">
                                                        <div class="col-xs-3">
                                                            Single Price
                                                            <input
                                                                    type="radio"
                                                                    name="plan"
                                                                    (change)="onSelectPricingPlan('Single Price',opt.id, opt.name)">
                                                        </div>
                                                        <div *ngIf="singlepriceMonthly ">
                                                            <div class="col-xs-6">
                                                                <input class="form-control"
                                                                       placeholder="Amount"
                                                                       type="number" #price_start
                                                                       (change)="onInputPrice(opt.id,price_start.value,price_end.value)">
                                                                <input class="form-control"
                                                                       type="number"
                                                                       [class.hidden]=true
                                                                       #price_end
                                                                       (change)="onInputPrice(opt.id,price_start.value,price_end.value)">
                                                            </div>
                                                            <div class="col-xs-3">
                                                                <select class="form-control"
                                                                        #currency
                                                                        (change)="onInputPrice(opt.id,price_start.value,price_end.value,currency.value)">
                                                                    <option *ngFor="let opt of options.currency"
                                                                            [value]="opt">
                                                                        {{opt}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-xs-3">
                                                            Price range
                                                            <input type="radio" name="plan"
                                                                   (change)="onSelectPricingPlan('Price range',opt.id, opt.name)">

                                                        </div>
                                                        <div *ngIf="pricerangeMonthly">
                                                            <div class="col-xs-3">
                                                                <input class="form-control"
                                                                       type="number"
                                                                       placeholder="To"
                                                                       #price_start
                                                                       (change)="onInputPrice(opt.id,price_start.value,price_end.value)">
                                                            </div>
                                                            <div class="col-xs-3">
                                                                <input class="form-control"
                                                                       type="number"
                                                                       placeholder="End"
                                                                       #price_end
                                                                       (change)="onInputPrice(opt.id,price_start.value,price_end.value)">
                                                            </div>
                                                            <div class="col-xs-3">
                                                                <select class="form-control"
                                                                        #currency
                                                                        (change)="onInputPrice(opt.id,price_start.value,price_end.value,currency.value)">
                                                                    <option *ngFor="let opt of options.currency"
                                                                            [value]="opt">
                                                                        {{opt}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div *ngIf="showYearly && opt.name === 'Yearly Subscription'">

                                                    <div class="row">
                                                        <div class="col-xs-3">
                                                            Single Price
                                                            <input
                                                                    type="radio"
                                                                    name="plan"
                                                                    (change)="onSelectPricingPlan('Single Price',opt.id, opt.name)">
                                                        </div>
                                                        <div *ngIf="singlepriceYearly ">
                                                            <div class="col-xs-6">
                                                                <input class="form-control"
                                                                       placeholder="Amount"
                                                                       type="number" #price_start
                                                                       (change)="onInputPrice(opt.id,price_start.value,price_end.value)">
                                                                <input class="form-control"
                                                                       type="number"
                                                                       [class.hidden]=true
                                                                       #price_end
                                                                       (change)="onInputPrice(opt.id,price_start.value,price_end.value)">
                                                            </div>
                                                            <div class="col-xs-3">
                                                                <select class="form-control"
                                                                        #currency
                                                                        (change)="onInputPrice(opt.id,price_start.value,price_end.value,currency.value)">
                                                                    <option *ngFor="let opt of options.currency"
                                                                            [value]="opt">
                                                                        {{opt}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-xs-3">
                                                            Price range
                                                            <input type="radio" name="plan"
                                                                   (change)="onSelectPricingPlan('Price range',opt.id, opt.name)">

                                                        </div>
                                                        <div *ngIf="pricerangeYearly">
                                                            <div class="col-xs-3">
                                                                <input class="form-control"
                                                                       type="number"
                                                                       placeholder="To"
                                                                       #price_start
                                                                       (change)="onInputPrice(opt.id,price_start.value,price_end.value)">
                                                            </div>
                                                            <div class="col-xs-3">
                                                                <input class="form-control"
                                                                       type="number"
                                                                       placeholder="End"
                                                                       #price_end
                                                                       (change)="onInputPrice(opt.id,price_start.value,price_end.value)">
                                                            </div>
                                                            <div class="col-xs-3">
                                                                <select class="form-control"
                                                                        #currency
                                                                        (change)="onInputPrice(opt.id,price_start.value,price_end.value,currency.value)">
                                                                    <option *ngFor="let opt of options.currency"
                                                                            [value]="opt">
                                                                        {{opt}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>

                                                <div *ngIf="showLifetime && opt.name === 'Lifetime License'">

                                                    <div class="row">
                                                        <div class="col-xs-3">
                                                            Single Price
                                                            <input
                                                                    type="radio"
                                                                    name="plan"
                                                                    (change)="onSelectPricingPlan('Single Price',opt.id, opt.name)">
                                                        </div>
                                                        <div *ngIf="singlepriceLifetime ">
                                                            <div class="col-xs-6">
                                                                <input class="form-control"
                                                                       placeholder="Amount"
                                                                       type="number" #price_start
                                                                       (change)="onInputPrice(opt.id,price_start.value,price_end.value)">
                                                                <input class="form-control"
                                                                       type="number"
                                                                       [class.hidden]=true
                                                                       #price_end
                                                                       (change)="onInputPrice(opt.id,price_start.value,price_end.value)">
                                                            </div>
                                                            <div class="col-xs-3">
                                                                <select class="form-control"
                                                                        #currency
                                                                        (change)="onInputPrice(opt.id,price_start.value,price_end.value,currency.value)">
                                                                    <option *ngFor="let opt of options.currency"
                                                                            [value]="opt">
                                                                        {{opt}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>

                                                    <div class="row">
                                                        <div class="col-xs-3">
                                                            Price range
                                                            <input type="radio" name="plan"
                                                                   (change)="onSelectPricingPlan('Price range',opt.id, opt.name)">

                                                        </div>
                                                        <div *ngIf="pricerangeLifetime">
                                                            <div class="col-xs-3">
                                                                <input class="form-control"
                                                                       type="number"
                                                                       placeholder="To"
                                                                       #price_start
                                                                       (change)="onInputPrice(opt.id,price_start.value,price_end.value)">


                                                            </div>
                                                            <div class="col-xs-3">
                                                                <input class="form-control"
                                                                       type="number"
                                                                       placeholder="End"
                                                                       #price_end
                                                                       (change)="onInputPrice(opt.id,price_start.value,price_end.value)">
                                                            </div>
                                                            <div class="col-xs-3">
                                                                <select class="form-control"
                                                                        #currency
                                                                        (change)="onInputPrice(opt.id,price_start.value,price_end.value,currency.value)">
                                                                    <option *ngFor="let opt of options.currency"
                                                                            [value]="opt">
                                                                        {{opt}}
                                                                    </option>
                                                                </select>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>


                                                <div *ngIf="showOther && opt.name === 'Other'">
                                                    <form class="form-inline">
                                                        <div class="form-group">
                                                            <label>Other Model</label>
                                                            <input class="form-control"
                                                                   type="text"
                                                                   placeholder="Model"
                                                                   #other_model
                                                                   (change)="onInputOtherModel(opt.id,other_model.value)">
                                                        </div>

                                                    </form>
                                                </div>


                                            </form>

                                        </div>
                                    </form>
                                </div>


                                <div class="row">
                                    <h4>Extra Services you offer</h4>
                                    <form class="form-horizontal">
                                        <div class="checkbox" *ngFor="let opt of extraservicesTag">
                                            <label>
                                                <input #{{opt.dbid}} type="checkbox"
                                                       (change)="onCheckboxExtraservices(opt,$event)"
                                                > {{opt.name}}</label>
                                        </div>
                                    </form>
                                </div>


                            </div>
                        </div>



                        <!--Screenshots-->
                        <div class="row">
                            <div class="col-md-12">
                                <h4>{{'Screenshots' | translate}}</h4>
                                <fieldset class="form-group">
                                    <p *ngIf="!screenshotsChosen">No file chosen</p>
                                    <label class="custom-file-upload">
                                        <input type="file"
                                               multiple
                                               image-upload
                                               (imageSelected)="fileChangeScreenshots($event)"
                                               [resizeOptions]="resizeOptions"
                                               #screenshots
                                               formControlName="screenshots">
                                        {{'Add Screenshots' | translate}}
                                    </label>

                                </fieldset>
                                <div *ngFor="let src of screenshotsRender" class="col-md-2">
                                    <img id="myFormScreenshots" [src]="src" [hidden]="!src" class="img-responsive"
                                         alt="Screenshots">
                                    <button type="button" class="btn btn-default" (click)="onDeleteScreenshot(src)">
                                        {{'Delete' | translate}}
                                    </button>
                                    <hr>
                                </div>
                            </div>
                        </div>


                        <div class="row">
                            <div class="col-md-4">
                                <h4>{{'Video' | translate}}</h4>
                                <fieldset class="form-group">
                                    <input
                                            #myVideo
                                            [(ngModel)]="myUrl"
                                            [ngModelOptions]="{standalone: true}"
                                            type="text"
                                            class="form-control"
                                            placeholder="Video"
                                    >
                                    <button type="button" class="btn btn-sm btn-primary"
                                            (click)="embedYoutube(myVideo.value)">Embed
                                    </button>
                                </fieldset>
                            </div>
                            <div class="col-md-8">
                                <div *ngIf="!videoType && embedVideo" style="margin-top: 30px;">
                                    <alert [type]="'danger'" dismissible="true" *ngIf="onYoutube">
                                        Please make sure you are uploading a supported youtube file type.
                                    </alert>
                                </div>
                                <div *ngIf="videoType">
                                    <iframe class="video" width="350" height="250" [src]="embedUrl"></iframe>
                                </div>
                                <button type="button"
                                        class="btn btn-sm btn-default"
                                        (click)="deleteVideo()"
                                        *ngIf="videoType">{{'Delete' | translate}}
                                </button>
                            </div>
                        </div>


                        <div class="row">

                            <div class="col-md-6">
                                <h4>{{'Minimum Requirements' | translate}}</h4>
                                <fieldset class="form-group">
				        <textarea type="text"
                                  class="form-control"
                                  placeholder="Minimum Requirements"
                                  formControlName="minrequirement"></textarea>
                                </fieldset>
                                <control-messages [control]="myForm.controls.minrequirement"></control-messages>

                            </div>

                            <div class="col-md-6">
                                <h4>{{'Terms & Conditions'| translate}}</h4>
                                <fieldset class="form-group">
				<textarea type="text"
                          class="form-control"
                          placeholder="{{'Terms & Conditions'| translate}}"
                          formControlName="termsncond"></textarea>
                                </fieldset>
                                <control-messages [control]="myForm.controls.termsncond"></control-messages>

                            </div>

                        </div>

                        <!--ALL TAG-->

                        <div class="row">

                            <div class="col-md-3">
                                <h4 for="languages">{{'Language' | translate}}</h4>
                                <form class="form-horizontal">
                                    <div class="checkbox" *ngFor="let opt of languagesTag">
                                        <label>
                                            <input #{{opt.dbid}} type="checkbox"
                                                   (change)="onCheckboxLanguages(opt,$event)"
                                            > {{opt.name}}</label>
                                    </div>
                                </form>
                            </div>

                            <div class="col-md-3">
                                <h4>{{'Category' | translate}}</h4>
                                <p>What type of service is this</p>
                                <form class="form-horizontal">
                                    <div class="checkbox" *ngFor="let opt of categoriesTag">
                                        <label>
                                            <input #{{opt.dbid}} type="checkbox"
                                                   (change)="onCheckboxCategories(opt,$event)"
                                            >{{opt.name}}</label>
                                    </div>
                                </form>
                            </div>

                            <div class="col-md-3">
                                <h4>{{'Department' | translate}}</h4>
                                <p>What departments does this Service best apply to</p>
                                <form class="form-horizontal">
                                    <div class="checkbox" *ngFor="let opt of departmentsTag">
                                        <label>
                                            <input #{{opt.dbid}} type="checkbox"
                                                   (change)="onCheckboxDepartments(opt,$event)"
                                            >{{opt.name}}</label>
                                    </div>
                                </form>
                            </div>

                            <div class="col-md-3">
                                <h4>{{'Industry' | translate}}</h4>
                                <p>What Industry is this Service designed for</p>
                                <form class="form-horizontal">
                                    <div class="checkbox" *ngFor="let opt of industriesTag">
                                        <label>
                                            <input #{{opt.dbid}} type="checkbox"
                                                   (change)="onCheckboxIndustries(opt,$event)"
                                            >{{opt.name}}</label>
                                    </div>
                                </form>
                            </div>
                        </div>

                    </form>
                </div>
            </div>
        </div>
    </div>
</div>
